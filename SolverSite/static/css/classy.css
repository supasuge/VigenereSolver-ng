/* Light theme (default) */
:root{
    --bg:#faf9f7;
    --card:#ffffff;
    --ink:#1c1b1a;
    --muted:#6b6a68;
    --accent:#1e88e5;
    --accent-ink:#fff;
    --line:#e9e6e2;
    --pill:#f1efe9;
    --shadow: 0 8px 24px rgba(0,0,0,0.06);
    --radius:14px;
    --focus: #3b82f6;
  }
  
  /* Dark theme overrides */
  html[data-theme="dark"]{
    --bg:#0f1115;
    --card:#171a21;
    --ink:#e8eef5;
    --muted:#9aa7b2;
    --accent:#7cc1ff;
    --accent-ink:#061018;
    --line:#222633;
    --pill:#12161f;
    --shadow: 0 10px 30px rgba(0,0,0,0.45);
    --focus:#7cc1ff;
  }
  
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    background:var(--bg);
    color:var(--ink);
    font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
    line-height:1.55;
  }
  
  .wrap{max-width:980px;margin:0 auto;padding:24px}
  
  /* Header */
  .site-header{border-bottom:1px solid var(--line);background:rgba(255,255,255,0.7);backdrop-filter:saturate(140%) blur(6px)}
  html[data-theme="dark"] .site-header{background:rgba(15,17,21,0.7)}
  .site-header.sticky{position:sticky; top:0; z-index:10}
  .header-grid{display:flex; align-items:center; justify-content:space-between}
  .brand{display:inline-flex; align-items:center; gap:10px; font-family:"Crimson Text", Georgia, "Times New Roman", serif; font-weight:600; letter-spacing:.3px; text-decoration:none; color:var(--ink)}
  .brand .logo{width:28px; height:28px}
  .brand-with-logo span{transform:translateY(1px)}
  .nav a{color:var(--muted);text-decoration:none;margin-left:16px}
  .nav a:hover{color:var(--ink)}
  .nav .theme-toggle{margin-left:12px}
  
  /* Footer */
  .site-footer{border-top:1px solid var(--line); padding:16px 0; background:transparent}
  .sep{opacity:.5;margin:0 8px}
  
  /* Cards */
  .card{
    background:var(--card);
    border:1px solid var(--line);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    padding:22px 22px;
    margin:18px 0;
  }
  .card h1, .card h2, .card h3{font-family:"Crimson Text", Georgia, serif; margin-top:4px}
  .card.subtle{background:transparent; box-shadow:none}
  .hero{background:linear-gradient(180deg,#fff, #fbfaf5); border-color:#efece6}
  html[data-theme="dark"] .hero{background:linear-gradient(180deg,#171a21,#0f1115); border-color:#222633}
  .hero-title{margin:0 0 .2rem 0; font-size:1.8rem}
  .hero-sub{color:var(--muted); margin:0}
  
  /* Forms */
  .form-grid{display:grid; gap:16px}
  .form-field label{display:block;font-weight:600;margin-bottom:6px}
  .form-field input[type="number"],
  .form-field select,
  .form-field textarea{
    width:100%;
    padding:10px 12px;
    border:1px solid var(--line);
    border-radius:10px;
    background:var(--card);
    font:inherit;
    color:var(--ink);
  }
  .form-field input:focus,
  .form-field select:focus,
  .form-field textarea:focus{
    outline:2px solid var(--focus);
    outline-offset:2px;
    border-color:transparent;
  }
  textarea{resize:vertical}
  .hint{color:var(--muted); font-size:.9rem; margin:.4rem 0 0}
  .checkbox{display:flex;align-items:center;gap:8px;font-weight:600}
  .options{border:1px dashed var(--line);border-radius:12px;padding:10px 12px;background:transparent}
  .options > summary{cursor:pointer;font-weight:700}
  .options-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:14px; margin-top:12px}
  
  /* Buttons */
  .actions{display:flex;gap:10px;margin-top:12px; flex-wrap:wrap}
  .btn{
    border:1px solid var(--line);
    background:var(--card);
    color:var(--ink);
    padding:8px 12px;
    border-radius:12px;
    cursor:pointer;
    transition:transform .02s ease, background .2s ease, box-shadow .2s ease;
    text-decoration:none;
    display:inline-flex;
    align-items:center;
    gap:6px;
  }
  .btn:hover{transform:translateY(-1px)}
  .btn:focus{outline:2px solid var(--focus); outline-offset:2px}
  .btn.primary{background:var(--accent); color:var(--accent-ink); border-color:transparent}
  .btn.outline{background:transparent;border-color:var(--ink)}
  .btn.tiny{padding:6px 8px; font-size:.85rem}
  
  /* Flashes */
  .flash-list{display:grid;gap:10px;margin:14px 0}
  .flash{padding:10px 12px;border-radius:10px;border:1px solid var(--line);background:var(--card)}
  
  /* Meta grid */
  .meta-grid{
    display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:10px;margin-top:10px
  }
  .meta-grid .k{display:block; color:var(--muted); font-size:.9rem}
  .meta-grid .v{font-weight:600}
  
  /* Result styling */
  .result .result-head{display:flex; align-items:flex-start; justify-content:space-between; gap:18px; flex-wrap:wrap}
  .kv{display:flex;flex-wrap:wrap; gap:8px}
  .pill{background:var(--pill); border:1px solid var(--line); border-radius:999px; padding:4px 10px; font-size:.85rem}
  .keys{display:flex; align-items:center; gap:10px; margin-top:6px}
  .key-label{font-weight:700}
  .key{background:var(--pill);border:1px solid var(--line);padding:6px 8px;border-radius:8px; font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace}
  .preview summary{cursor:pointer;font-weight:700}
  .plaintext{
    white-space:pre-wrap;
    background:var(--pill); border:1px solid var(--line);
    border-radius:12px; padding:12px; margin-top:10px;
    font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
    max-height:480px; overflow:auto;
  }
  .code{
    background:#111; color:#efefef; padding:12px; border-radius:12px; overflow:auto;
    border:1px solid #000; box-shadow:inset 0 0 0 1px rgba(255,255,255,0.04)
  }
  html[data-theme="dark"] .code{background:#0d1016}
  
  /* How pages */
  .how-list{list-style: none; padding:0; margin:0}
  .how-list > li{padding:12px 0; border-bottom:1px dashed var(--line)}
  .how-list > li:last-child{border-bottom:none}
  
  /* Small screens */
  @media (max-width: 640px){
    .hero-title{font-size:1.5rem}
    .wrap{padding:16px}
  }
  